{"version":3,"sources":["constants/EntityConstants.js","base/Cache.js","server/EntTypes.js","server/Cache.js","server/WWW.js","server/Ents.js","server/GeoData.js","core/GeoServer.js","server/GIG2.js","core/GIGServer.js","nonstate/atoms/TestMode.js","core/Entity.js","constants/LatLngConstants.js","base/DataStructures.js","base/LatLng.js","core/RegionGeo.js","nonstate/atoms/XButton.js","constants/CensusConstants.js","nonstate/atoms/Format.js","core/Census.js","base/MathX.js","nonstate/atoms/CensusDescription.js","nonstate/atoms/Loader.js","nonstate/atoms/Reference.js","constants/ColorConstants.js","core/Color.js","nonstate/molecules/Table.js","nonstate/molecules/PieChart.js","core/DataTable.js","nonstate/molecules/Pyramid.js","stateful/molecules/CensusInfo.js","stateful/molecules/CensusInfoGroup.js","stateful/molecules/CensusInfoGroupList.js","stateful/molecules/DetailedInfoPane.js","nonstate/molecules/InfoTable.js","stateful/atoms/EntityLink.js","stateful/molecules/EntityLinkList.js","stateful/molecules/EntityLinkListList.js","stateful/molecules/EntityInfoCustom.js","stateful/molecules/EntityInfo.js","stateful/molecules/EntityInfoPane.js","nonstate/molecules/Infobox.js","stateful/molecules/RegionMap.js","stateful/atoms/MapLocationMarker.js","stateful/pages/AdminPage.js","base/OSM.js","App.js","reportWebVitals.js","index.js"],"names":["ENTITY","COUNTRY","PROVINCE","DISTRICT","DSD","GND","ED","PD","PS","MOH","LG","UNKNOWN","DEFAULT_ENTITY_ID","ENTITY_LABEL_MAP","Object","values","ENTITY_LABEL_SHORT_MAP","ISO_ID_LENGTH_TO_ENTITY","2","4","5","7","10","EC_ID_LENGTH_TO_ENTITY","6","TEST_CACHE_DISABLED","require","EntTypes","entID","substring","length","Cache","cacheKey","asyncFallback","hotItem","localStorage","getItem","JSON","parse","console","debug","coldItem","setItem","stringify","QuotaExceededError","clear","fallback","JSON_HEADERS","headers","Accept","TSV_HEADERS","jsonNonCache","url","a","fetch","response","json","dataJson","WWW","pathFragmentList","join","get","text","content","lines","split","keys","map","key","replace","dataList","slice","line","reduce","data","i","filter","Ents","entType","process","tsv","getEntsByType","ents","entIndex","ent","entTypes","getEntTypes","Promise","all","getEntIndexByType","entIndexList","allEntIndex","iEnt","getEntType","ENT_URL_BASE","GeoData","regionID","regionType","lat","lng","getLatLangRegion","getRegionIDsFromGndID","regionIDs","gndID","getEnt","gndEnt","getAllGeodata","allGeoData","geoData","objects","geometries","forEach","geometry","coordinates","arcs","arc","shift","push","properties","id","point","turf","getGeoForRegionType","geo","multiPolygon","GeoServer","getGeoForRegionID","latlngToRegion","regions","GIG2","tableName","dList","GIGServer","entityID","entity","getTable","table","census","row","parseInt","TestMode","props","details","entries","TEST_GIG_SERVER_DISABLED","TEST_GEO_SERVER_DISABLED","k","className","Entity","idLength","isISORegionType","undefined","isECType","entityType","entityData","includes","LAT_LNG","COLOMBO_LIPTON_CIRCUS","COLOMBO_THUNMULLA","WARWICK","PARLIAMENT","COLOMBO","KANDY","KURUNEGALA","arrayFlatten","arr","flattenedArr","arrItem","concat","getBoundsForGeoData","latLngList","type","minLat","minLng","maxLat","maxLng","Math","min","max","getBounds","x","getRegionBBox","getGeo","XButton","onClick","CENSUS_TABLE_GROUPS","CENSUS_TABLE_SPAN_INFO","Format","area","numWithComma","altitude","round","phoneNumber","phoneNumberClean","replaceAll","phoneNumberStr","href","s","word","charAt","toUpperCase","value","total","p","fontSize","sqrt","stylePercent","styleValue","color","style","percent","pop","d3","getCensusLabel","titleCase","population","MathX","numArr","b","random","CensusDescription","dataMap","sort","sum","v","renderedPct","renderedLabel","Loader","Reference","title","label","link","COLOR_SL_FLAG","FIELD_NAME_TO_COLOR","hsla","h","l","getFieldNameColor","fieldName","randomInt","PieChart","this","tableInfos","valueIsPercent","iRow","width","heigh","cx","cy","r","Component","extendedDataRaw","valueA","extendedDataSig","totalSig","others","extendedData","getExtendedData","height","runningTotal","renderedArcs","iData","p1","p2","theta1","PI","x1","sin","y1","cos","theta2","x2","y2","largeArcFlag","abs","sweepFlag","d","fill","Pyramid","ageKeys","innerDataMap","dataValues","totalKeySpan","nData","styleDiv","rollingKeySpan","renderedBars","ageKey","keySpan","widthBar","heightBar","y","CensusInfo","state","getCensus","setState","renderWithData","ChartComponent","iTable","CensusInfoGroup","groupName","tableNames","renderedInner","CensusInfoGroupList","iCensusInfoGroup","DetailedInfoPane","showDetails","onClickShow","bind","onClickHide","e","InfoTable","renderRow","EntityLink","getEntity","iEntityID","getEntityType","name","getEntityLabelShort","pageName","EntityLinkList","entityIDList","iEntityIDList","EntityLinkListList","entityIDListList","ientityIDListList","getProvinceInfo","assign","fips","getDistrictInfo","hasc","getDSDInfo","getGNDInfo","gnd_num","getParentEntityInfo","getIDEntries","idInfo","getEntityLabel","getRelatedEntityInfo","info","funcGetKey","idListList","Array","isArray","keyToArr","elem","getBaseInfo","Name","Area","Population","popDensity","centroid_altitude","getCustomInfo","getter","EntityInfoPane","baseInfo","parentEntityInfo","customInfo","relatedEntityInfo","Infobox","subTitle","children","RegionMap","geoDataForRegion","polygon","Polyline","positions","MapLocationMarker","onChangeLocation","useMapEvents","click","latlng","flyTo","getZoom","setPosition","useState","getCenter","AdminPage","getDefaultLatLngAndZoom","match","params","getRegionInfo","region","getRegionID","latLng","latSpan","zoom","log2","MapContainer","center","TileLayer","renderInnerMapLayer","renderInner","App","basename","path","component","to","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.94cda0c0.chunk.js","sourcesContent":["export const ENTITY = {\r\n  COUNTRY: 'country',\r\n  PROVINCE: 'province',\r\n  DISTRICT: 'district',\r\n  DSD: 'dsd',\r\n  GND: 'gnd',\r\n  ED: 'ed',\r\n  PD: 'pd',\r\n  PS: 'ps',\r\n  MOH: 'moh',\r\n  LG: 'lg',\r\n  UNKNOWN: 'unknown',\r\n}\r\n\r\nexport const DEFAULT_ENTITY_ID = 'LK-1127015';\r\n\r\nexport const ENTITIES = Object.values(ENTITY);\r\n\r\nexport const ENTITY_LABEL_MAP = {\r\n  [ENTITY.COUNTRY]: 'Country',\r\n  [ENTITY.PROVINCE]: 'Province',\r\n  [ENTITY.DISTRICT]: 'Administrative District',\r\n  [ENTITY.DSD]: 'Divisional Secretariat Division',\r\n  [ENTITY.GND]: 'Grama Niladari Division',\r\n  [ENTITY.PD]: 'Polling Division',\r\n  [ENTITY.ED]: 'Electoral District',\r\n  [ENTITY.PS]: 'Police Station',\r\n  [ENTITY.LG]: 'Local Authority',\r\n  [ENTITY.MOH]: 'Medical Office of Health Area',\r\n}\r\n\r\nexport const ENTITY_LABEL_SHORT_MAP = {\r\n  [ENTITY.COUNTRY]: '',\r\n  [ENTITY.PROVINCE]: 'Province',\r\n  [ENTITY.DISTRICT]: 'District',\r\n  [ENTITY.DSD]: 'DSD',\r\n  [ENTITY.GND]: 'GND',\r\n  [ENTITY.PD]: 'PD',\r\n  [ENTITY.ED]: 'ED',\r\n  [ENTITY.PS]: 'PS',\r\n  [ENTITY.LG]: '',\r\n  [ENTITY.MOH]: 'MOH',\r\n}\r\n\r\nexport const ISO_ENTITY_TO_ID_LENGTH = {\r\n  [ENTITY.COUNTRY]: 2,\r\n  [ENTITY.PROVINCE]: 4,\r\n  [ENTITY.DISTRICT]: 5,\r\n  [ENTITY.DSD]: 7,\r\n  [ENTITY.GND]: 10,\r\n}\r\nexport const ISO_ID_LENGTH_TO_ENTITY = {\r\n  2: [ENTITY.COUNTRY],\r\n  4: [ENTITY.PROVINCE],\r\n  5: [ENTITY.DISTRICT],\r\n  7: [ENTITY.DSD],\r\n  10: [ENTITY.GND],\r\n}\r\n\r\nexport const EC_ID_LENGTH_TO_ENTITY = {\r\n  5: ENTITY.ED,\r\n  6: ENTITY.PD,\r\n}\r\n","const md5 = require('md5');\r\nexport const CACHE_VERSION = 'v2021-07-01';\r\nexport const TEST_CACHE_DISABLED = false;\r\n\r\nexport async function asyncCacheGet(cacheKey, asyncFallback) {\r\n\r\n  if (TEST_CACHE_DISABLED) {\r\n    return await asyncFallback();\r\n  }\r\n\r\n  const finalCacheKey = md5(`${CACHE_VERSION}:${cacheKey}`);\r\n  let dataJson = localStorage.getItem(finalCacheKey);\r\n\r\n  let data = undefined;\r\n  if (!dataJson) {\r\n    data = await asyncFallback();\r\n    if (data) {\r\n      dataJson = JSON.stringify(data);\r\n      try {\r\n        localStorage.setItem(finalCacheKey, dataJson);\r\n      } catch {\r\n        localStorage.clear();\r\n        localStorage.setItem(finalCacheKey, dataJson);\r\n      }\r\n\r\n    }\r\n  } else {\r\n    data = JSON.parse(dataJson);\r\n  }\r\n  return data;\r\n}\r\n","import {ENTITY} from 'constants/EntityConstants.js';\r\n\r\nexport default class EntTypes {\r\n  static getEntTypes() {\r\n    return Object.values(ENTITY);\r\n  }\r\n  static getEntType(entID) {\r\n    if (entID.substring(0, 2) === \"LK\") {\r\n      const entIDLength = entID.length;\r\n      switch (entIDLength) {\r\n        case 2:\r\n          return ENTITY.COUNTRY;\r\n        case 4:\r\n          return ENTITY.PROVINCE;\r\n        case 5:\r\n          return ENTITY.DISTRICT;\r\n        case 7:\r\n          return ENTITY.DSD;\r\n        case 10:\r\n          return ENTITY.GND;\r\n        default:\r\n          return ENTITY.UNKNOWN;\r\n      }\r\n    }\r\n    if (entID.substring(0, 2) === \"EC\") {\r\n      const entIDLength = entID.length;\r\n      switch (entIDLength) {\r\n        case 5:\r\n          return ENTITY.ED;\r\n        case 6:\r\n          return ENTITY.PD;\r\n        default:\r\n          return ENTITY.UNKNOWN;\r\n      }\r\n    }\r\n\r\n    if (entID.substring(0, 2) === \"LG\") {\r\n      return ENTITY.LG;\r\n    }\r\n\r\n    if (entID.substring(0, 3) === \"MOH\") {\r\n      return ENTITY.MOH;\r\n    }\r\n    return ENTITY.UNKNOWN;\r\n  }\r\n\r\n}\r\n","export default class Cache {\r\n  static async get(cacheKey, asyncFallback) {\r\n    const hotItem = localStorage.getItem(cacheKey);\r\n    if (hotItem) {\r\n      return JSON.parse(hotItem);\r\n    }\r\n\r\n    console.debug(\"⌛\", \"Cache.get\", \"cold\", cacheKey);\r\n    const coldItem = await asyncFallback();\r\n    try {\r\n      localStorage.setItem(cacheKey, JSON.stringify(coldItem));\r\n    } catch (QuotaExceededError) {\r\n      localStorage.clear();\r\n    }\r\n    return coldItem;\r\n  }\r\n\r\n  static getSync(cacheKey, fallback) {\r\n    const hotItem = localStorage.getItem(cacheKey);\r\n    if (hotItem) {\r\n      return JSON.parse(hotItem);\r\n    }\r\n\r\n    console.debug(\"⌛\", \"Cache.getSync\", \"cold\", cacheKey);\r\n    const coldItem = fallback();\r\n    try {\r\n      localStorage.setItem(cacheKey, JSON.stringify(coldItem));\r\n    } catch (QuotaExceededError) {\r\n      localStorage.clear();\r\n    }\r\n    return coldItem;\r\n  }\r\n}\r\n","import Cache from \"./Cache.js\";\r\n\r\nconst CACHE_VERSION = \"v20210823\";\r\n\r\nconst JSON_HEADERS = {\r\n  headers: {\r\n    Accept: \"application/json\",\r\n  },\r\n};\r\n\r\nconst TSV_HEADERS = {\r\n  headers: {\r\n    Accept: \"text/csv\",\r\n  },\r\n};\r\n\r\nasync function jsonNonCache(url) {\r\n  const response = await fetch(url, JSON_HEADERS);\r\n  const dataJson = await response.json();\r\n  return dataJson;\r\n}\r\n\r\nexport default class WWW {\r\n  static pathJoin(pathFragmentList) {\r\n    return pathFragmentList.join(\"/\");\r\n  }\r\n\r\n  static async json(url) {\r\n    return Cache.get(`WWW.json.${CACHE_VERSION}.${url}`, async function () {\r\n      return jsonNonCache(url);\r\n    });\r\n  }\r\n\r\n  static async tsv(url) {\r\n    const response = await fetch(url, TSV_HEADERS);\r\n    const content = await response.text();\r\n    const lines = content.split(\"\\n\");\r\n    const keys = lines[0].split(\"\\t\").map((key) => key.replace(\"\\r\", \"\"));\r\n    const dataList = lines\r\n      .slice(1, -1)\r\n      .map(function (line) {\r\n        const values = line.split(\"\\t\");\r\n        return keys.reduce(function (data, key, i) {\r\n          data[key] = values[i].replace(\"\\r\", \"\");\r\n          return data;\r\n        }, {});\r\n      })\r\n      .filter((data) => data);\r\n    return dataList;\r\n  }\r\n}\r\n","import EntTypes from \"./EntTypes.js\";\r\nimport WWW from \"./WWW.js\";\r\n\r\nconst ENT_URL_BASE = process.env.REACT_APP_ENT_URL_BASE;\r\n\r\nconst ID_KEY = \"id\";\r\nexport default class Ents {\r\n  static async getEntsByType(entType) {\r\n    const url = `${ENT_URL_BASE}/ents/${entType}.tsv`;\r\n    return await WWW.tsv(url);\r\n  }\r\n\r\n  static async getEntIndexByType(entType) {\r\n    const ents = await Ents.getEntsByType(entType);\r\n    return ents.reduce(function (entIndex, ent) {\r\n      entIndex[ent[ID_KEY]] = ent;\r\n      return entIndex;\r\n    }, {});\r\n  }\r\n\r\n  static async getAllEntIndex() {\r\n    const entTypes = EntTypes.getEntTypes();\r\n    const entIndexList = await Promise.all(\r\n      entTypes.map(async function (entType) {\r\n        return await Ents.getEntIndexByType(entType);\r\n      })\r\n    );\r\n\r\n    return entTypes.reduce(function (allEntIndex, entType, iEnt) {\r\n      allEntIndex[entType] = entIndexList[iEnt];\r\n      return allEntIndex;\r\n    }, {});\r\n  }\r\n\r\n  static async getEnt(entID) {\r\n    const entType = EntTypes.getEntType(entID);\r\n    const entIndex = await Ents.getEntIndexByType(entType);\r\n    let ent = entIndex[entID];\r\n    if (ent[\"centroid\"]) {\r\n      ent[\"centroid\"] = JSON.parse(ent[\"centroid\"]);\r\n    }\r\n    return ent;\r\n  }\r\n}\r\n","import EntTypes from \"./EntTypes.js\";\r\nimport WWW from \"./WWW.js\";\r\nimport {ENTITY} from 'constants/EntityConstants.js';\r\nimport * as turf from 'turf';\r\nimport Ents from \"./Ents.js\";\r\n\r\nconst ENT_URL_BASE = process.env.REACT_APP_ENT_URL_BASE;\r\n\r\nexport default class GeoData {\r\n  static async getGeoForRegionID(regionID) {\r\n    const regionType = EntTypes.getEntType(regionID);\r\n    const url = ENT_URL_BASE + `/geo/json/${regionType}/${regionID}.json`;\r\n    return [await WWW.json(url)];\r\n  }\r\n\r\n  static async latlngToRegion([lat, lng]) {\r\n\r\n    const regionID = await GeoData.getLatLangRegion([lat, lng], ENTITY.GND)\r\n    const regionIDs = await GeoData.getRegionIDsFromGndID(regionID)\r\n\r\n    return regionIDs\r\n  }\r\n  static async getRegionIDsFromGndID(gndID) {\r\n    const gndEnt = await Ents.getEnt(gndID)\r\n\r\n    const regionIDs = {\r\n      [ENTITY.PROVINCE] : gndEnt[`${ENTITY.PROVINCE}_id`],\r\n      [ENTITY.DISTRICT] : gndEnt[`${ENTITY.DISTRICT}_id`],\r\n      [ENTITY.DSD] : gndEnt[`${ENTITY.DSD}_id`], \r\n      [ENTITY.GND] : gndEnt[`${ENTITY.GND}_id`]\r\n    }\r\n    return regionIDs\r\n  }\r\n\r\n  static async getGeoForRegionType(regionType) {\r\n    // Get region to geo index\r\n    var allGeoData = await GeoData.getAllGeodata(regionType);\r\n    var geoData = {}\r\n    \r\n    allGeoData.objects.data.geometries.forEach((geometry) =>{\r\n      var coordinates = []\r\n      geometry.arcs.forEach((arc) => {\r\n        arc = arc.shift()\r\n        coordinates.push(allGeoData.arcs[arc])\r\n      })\r\n      geoData[geometry.properties.id] = {\r\n        coordinates: coordinates,\r\n        properties: geometry.properties,\r\n      } \r\n    })\r\n\r\n    return geoData\r\n  }\r\n\r\n  static async getAllGeodata(regionType) {\r\n    const fileExt = 'topojson';\r\n    const url = ENT_URL_BASE + `/geo/topo-geo_json/${regionType}.${fileExt}`;\r\n    const allGeoData = await WWW.json(url)\r\n    return allGeoData\r\n  }\r\n\r\n  static async getLatLangRegion([lat, lng], regionType) {\r\n    const point = turf.point([lng, lat]); \r\n    const geoData = await GeoData.getGeoForRegionType(regionType);\r\n    for (const regionID in geoData) {\r\n        const geo = geoData[regionID];\r\n        const multiPolygon = turf.multiPolygon([geo.coordinates], geo.properties);\r\n\r\n        if (turf.inside(point, multiPolygon)) {\r\n          return geoData[regionID].properties.id;\r\n        }\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n","import GeoData from '../server/GeoData.js';\r\n\r\nexport const TEST_GEO_SERVER_DISABLED = false;\r\n\r\nexport default class GeoServer{\r\n  static async getGeo(regionID) {\r\n    let  geo = await GeoData.getGeoForRegionID(regionID);\r\n    geo = {\"coordinates\" : geo,\"type\":\"MultiPolygon\"}\r\n    return geo;\r\n  }\r\n\r\n  static async getRegionInfo([lat, lng]) {\r\n    const regions = await GeoData.latlngToRegion([lat, lng]);\r\n    return regions;\r\n  }\r\n}\r\n","import WWW from \"./WWW.js\";\r\n\r\nexport const DEFAULT_LAYER_TABLE_NAME =\r\n  \"government-elections-parliamentary.regions-ec.2020\";\r\n\r\nconst CENSUS_URL_BASE = process.env.REACT_APP_CENSUS_URL_BASE;\r\n\r\nexport default class GIG2 {\r\n  static async getTable(tableName) {\r\n    const url = `${CENSUS_URL_BASE}/${tableName}.tsv`;\r\n    const dList = await WWW.tsv(url);\r\n    return dList;\r\n  }\r\n}\r\n","import Ents from '../server/Ents.js';\r\nimport GIG2 from '../server/GIG2.js';\r\n\r\nexport const TEST_GIG_SERVER_DISABLED = false;\r\n\r\nexport default class GIGServer {\r\n\r\n  static async getEntity(entityID) {\r\n    let entity = await Ents.getEnt(entityID);\r\n    return entity;\r\n  }\r\n\r\n  static async getCensus(tableName, entityID) {\r\n    const table = await GIG2.getTable(tableName);\r\n    let census = table.filter((row) => row['entity_id'] === entityID);\r\n\r\n    for (let key in census[0]) {\r\n      try {\r\n        census[0][key] = parseInt(census[0][key])\r\n      } catch {\r\n      }\r\n      \r\n    }\r\n    return census;\r\n\r\n  }\r\n}\r\n","import {\r\n  TEST_CACHE_DISABLED,\r\n} from 'base/Cache.js';\r\nimport { \r\n  TEST_GEO_SERVER_DISABLED,\r\n} from 'core/GeoServer.js';\r\nimport {\r\n  TEST_GIG_SERVER_DISABLED,\r\n} from 'core/GIGServer.js';\r\n\r\nimport './TestMode.css';\r\n\r\nexport default function TestMode(props) {\r\n  const details = Object.entries(\r\n    {\r\n      TEST_CACHE_DISABLED,\r\n      TEST_GIG_SERVER_DISABLED,\r\n      TEST_GEO_SERVER_DISABLED,\r\n    }\r\n  ).filter(([k, v]) => v).map(([k, v]) => k).join(' ;');\r\n\r\n  if (!details) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"div-test-mode\">\r\n      {`Test Mode: ${details}`}\r\n    </div>\r\n  )\r\n}\r\n","import {\r\n  EC_ID_LENGTH_TO_ENTITY,\r\n  ENTITY,\r\n  ENTITY_LABEL_MAP,\r\n  ENTITY_LABEL_SHORT_MAP,\r\n  ISO_ID_LENGTH_TO_ENTITY,\r\n} from 'constants/EntityConstants.js';\r\n\r\nexport default class Entity {\r\n\r\n  static isISORegionType(entityID) {\r\n    return entityID.substring(0, 2) === 'LK';\r\n  }\r\n\r\n  static isECType(entityID) {\r\n    return entityID.substring(0, 2) === 'EC';\r\n  }\r\n\r\n  static getEntityType(entityID) {\r\n    if (!entityID) {\r\n      return ENTITY.UNKNOWN;\r\n    }\r\n    const idLength = entityID.length;\r\n\r\n    if (Entity.isISORegionType(entityID)) {\r\n      return ISO_ID_LENGTH_TO_ENTITY[idLength] || undefined;\r\n    }\r\n\r\n    else if (Entity.isECType(entityID)) {\r\n      return EC_ID_LENGTH_TO_ENTITY[idLength] || undefined;\r\n    }\r\n\r\n    else if (entityID.substring(0, 2) === 'PS') {\r\n      return ENTITY.PS;\r\n    }\r\n\r\n    else if (entityID.substring(0, 3) === 'MOH') {\r\n      return ENTITY.MOH;\r\n    }\r\n\r\n    else if (entityID.substring(0, 2) === 'LG') {\r\n      return ENTITY.LG;\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  static getEntityLabel(entityType) {\r\n    return ENTITY_LABEL_MAP[entityType];\r\n  }\r\n\r\n  static getEntityLabelShort(entityType) {\r\n    return ENTITY_LABEL_SHORT_MAP[entityType];\r\n  }\r\n\r\n  static getIDEntries(entityData) {\r\n    return Object.entries(entityData).filter(\r\n      function([k, v]) {\r\n        return k.includes('_id');\r\n      }\r\n    );\r\n  }\r\n\r\n\r\n}\r\n","\r\nexport const LAT_LNG = {\r\n  COLOMBO_LIPTON_CIRCUS: [6.91727721553381, 79.86479316713498],\r\n  COLOMBO_THUNMULLA: [6.898934602923438, 79.86047296462549],\r\n  WARWICK: [6.899161363627201, 80.82915891540118],\r\n  PARLIAMENT: [6.886788895029474, 79.91874847062672],\r\n\r\n  COLOMBO: [6.9271, 79.8612],\r\n  KANDY: [7.2906, 80.6337],\r\n  KURUNEGALA: [7.4818, 80.3609],\r\n};\r\n","export function arrayFlatten(arr) {\r\n  return arr.reduce(\r\n    function(flattenedArr, arrItem) {\r\n      return flattenedArr.concat(arrItem);\r\n    },\r\n    [],\r\n  )\r\n}\r\n\r\nexport function dictZip(keys, values) {\r\n  return keys.reduce(\r\n    function(dict, key, i) {\r\n      dict[key] = values[i];\r\n      return dict;\r\n    },\r\n    {},\r\n  )\r\n}\r\n\r\nexport function invertDict(dict) {\r\n  return Object.entries(dict).reduce(\r\n    function(inverseDict, [key, value]) {\r\n      inverseDict[value] = key;\r\n      return inverseDict;\r\n    },\r\n    {},\r\n  )\r\n}\r\n\r\nexport function indexArrayByKey(arr, funcGetKey) {\r\n  if (!Array.isArray(arr)) {\r\n    // throw new Error('Input is not an array.');\r\n    return [];\r\n  }\r\n  \r\n  return arr.reduce(\r\n    function(keyToArr, elem) {\r\n      const key = funcGetKey(elem);\r\n      if (!keyToArr[key]) {\r\n        keyToArr[key] = [];\r\n      }\r\n      keyToArr[key].push(elem);\r\n      return keyToArr;\r\n    },\r\n    {},\r\n  )\r\n}\r\n","import {arrayFlatten} from './DataStructures.js';\r\n\r\nexport function roundLatLng([lat, lng]) {\r\n  const Q = 10 ** 6;\r\n  const r = (x) => Math.round(x * Q) / Q;\r\n  return [r(lat), r(lng)];\r\n}\r\n\r\nexport function parseLatLngAndZoom(s) {\r\n  const [latStr, lngStr, zoomStr] =\r\n    s.replaceAll(/(N|E|W|S|z)/g, '').split(',');\r\n  return {\r\n    latLng: roundLatLng([latStr, lngStr]),\r\n    zoom: parseInt(zoomStr),\r\n  }\r\n}\r\n\r\nexport function latLngAndZoomToString([lat, lng], zoom) {\r\n  return `${lat}N,${lng}E,${zoom}z`;\r\n}\r\n\r\nexport function getBoundsForGeoData(geoData) {\r\n  const type = geoData.type;\r\n  let latLngList;\r\n  if (type === 'MultiPolygon') {\r\n    latLngList = arrayFlatten(arrayFlatten(geoData.coordinates));\r\n  }\r\n  else if (type === 'Polygon') {\r\n    latLngList = arrayFlatten(geoData.coordinates);\r\n  }\r\n\r\n  return getBounds(latLngList.map(x => [x[1], x[0]]));\r\n}\r\n\r\nexport function getBounds(latLngList) {\r\n  return latLngList.reduce(\r\n    function([[minLat, minLng], [maxLat, maxLng]], [lat, lng]) {\r\n      return [\r\n        [\r\n          Math.min(minLat, lat),\r\n          Math.min(minLng, lng),\r\n        ],\r\n        [\r\n          Math.max(maxLat, lat),\r\n          Math.max(maxLng, lng),\r\n        ],\r\n      ]\r\n    },\r\n    [[180, 180], [-180, -180]],\r\n  );\r\n}\r\n","import GeoServer from './GeoServer.js';\r\nimport {getBoundsForGeoData} from 'base/LatLng.js';\r\n\r\nexport async function getRegionBBox(regionID) {\r\n  // throws GeoServerError\r\n  const geo = await GeoServer.getGeo(regionID);\r\n  const [[minLat, minLng], [maxLat, maxLng]] = getBoundsForGeoData(geo);\r\n  return [[minLat, minLng], [maxLat, maxLng]];\r\n}\r\n","import 'nonstate/atoms/XButton.css';\r\n\r\nexport default function XButton(props) {\r\n  return (\r\n    <div\r\n      className=\"div-x-button\"\r\n      onClick={props.onClick}\r\n    >\r\n      ✕\r\n    </div>\r\n  );\r\n}\r\n","export const CENSUS_TABLE_GROUPS = {\r\n  'Demographic Information': [\r\n    'population-gender.regions.2012',\r\n    'population-age_group.regions.2012',\r\n    'population-marital_status.regions.2012',\r\n  ],\r\n  'Ethno-Religious Information': [\r\n    'population-ethnicity.regions.2012',\r\n    'population-religion.regions.2012',\r\n  ],\r\n  'Household Information': [\r\n    'social-household-communication_items.regions.2012',\r\n    'social-household-lighting.regions.2012',\r\n    'social-household-cooking_fuel.regions.2012',\r\n\r\n    'social-household-source_of_drinking_water.regions.2012',\r\n    'social-household-solid_waste_disposal.regions.2012',\r\n    'social-household-toilet_facilities.regions.2012',\r\n\r\n    'social-household-roof_type.regions.2012',\r\n    'social-household-floor_type.regions.2012',\r\n    'social-household-wall_type.regions.2012',\r\n    'social-household-structure.regions.2012',\r\n\r\n    'social-household-living_quarters.regions.2012',\r\n    'social-household-type_of_unit.regions.2012',\r\n    'social-household-occupation_status.regions.2012',\r\n    'social-household-year_of_construction.regions.2012',\r\n\r\n    'social-household-number_of_rooms.regions.2012',\r\n    'social-household-number_of_persons.regions.2012',\r\n    'social-household-relationship_to_head.regions.2012',\r\n    'social-household-number-of-households.regions.2012',\r\n    'social-household-ownership-status.regions.2012',\r\n  ],\r\n  \r\n};\r\n\r\n\r\n// export const CENSUS_TABLE_GROUPS = {\r\n//   'Demographic Information': [\r\n//     'gender_of_population',\r\n//     'age_group_of_population',\r\n//     'marital_status_of_population',\r\n//   ],\r\n//   'Household Information': [\r\n//     'communication_items_owned_by_household',\r\n//     'lighting_of_household',\r\n//     'cooking_fuel_of_household',\r\n\r\n//     'source_of_drinking_water_of_household',\r\n//     'solid_waste_disposal_by_household',\r\n//     'toilet_facilities_of_household',\r\n\r\n//     'roof_type_in_housing_unit',\r\n//     'floor_type_in_housing_unit',\r\n//     'wall_type_in_housing_units',\r\n//     'structure_of_housing_units',\r\n\r\n//     'living_quarters',\r\n//     'type_of_housing_unit',\r\n//     'occupation_status_of_housing_units',\r\n//     'year_of_construction_of_housing_unit',\r\n\r\n//     'rooms_in_housing_unit',\r\n//     'persons_living_in_housing_unit',\r\n//     'relationship_to_household_head_of_population',\r\n//     'households_living_in_housing_unit',\r\n//     'housing_ownership_status_of_household',\r\n//   ],\r\n//   'Ethno-Religious Information': [\r\n//     'ethnicity_of_population',\r\n//     'religious_affiliation_of_population',\r\n//   ],\r\n// };\r\n\r\nexport const CENSUS_TABLE_SPAN_INFO = {\r\n  'population-age_group.regions.2012': [\r\n    ['less_than_10', 10],\r\n    ['10_~_19', 10],\r\n    ['20_~_29', 10],\r\n    ['30_~_39', 10],\r\n    ['40_~_49', 10],\r\n    ['50_~_59', 10],\r\n    ['60_~_69', 10],\r\n    ['70_~_79', 10],\r\n    ['80_~_89', 10],\r\n    ['90_and_above', 10],\r\n  ],\r\n  'social-household-year_of_construction.regions.2012': [\r\n    ['before_80', 25],\r\n    ['1980_1989', 10],\r\n    ['1990_1994', 5],\r\n    ['1995_1999', 5],\r\n    ['2000_2004', 5],\r\n    ['2005', 1],\r\n    ['2006', 1],\r\n    ['2007', 1],\r\n    ['2008', 1],\r\n    ['2009', 1],\r\n    ['2010', 1],\r\n    ['2011', 1],\r\n  ],\r\n  'social-household-number_of_rooms.regions.2012': [\r\n    ['1_room', 1],\r\n    ['2_rooms', 1],\r\n    ['3_rooms', 1],\r\n    ['4_rooms', 1],\r\n    ['5_rooms', 1],\r\n    ['6_rooms', 1],\r\n    ['7_rooms', 1],\r\n    ['8_rooms', 1],\r\n    ['9_rooms', 1],\r\n    ['10_and_above', 1],\r\n  ],\r\n\r\n  'social-household-number_of_persons.regions.2012': [\r\n    ['1_person', 1],\r\n    ['2_persons', 1],\r\n    ['3_persons', 1],\r\n    ['4_persons', 1],\r\n    ['5_persons', 1],\r\n    ['6_persons', 1],\r\n    ['7_persons', 1],\r\n    ['8_persons', 1],\r\n    ['9_persons', 1],\r\n    ['10_or_more', 1],\r\n  ],\r\n  'social-household-number-of-households.regions.2012': [\r\n    ['1_household', 1],\r\n    ['2_households', 1],\r\n    ['3_households', 1],\r\n    ['4_households', 1],\r\n    ['5_or_more', 1],\r\n  ]\r\n}\r\n","import * as d3 from 'd3';\r\n\r\nconst FT_PER_M = 3.28084;\r\n// const MILE_PER_KM = 0.621371;\r\n\r\nexport default class Format {\r\n  static numWithComma = d3.format(\",\")\r\n  static percent = d3.format(\".2p\")\r\n\r\n  static area(area) {\r\n    return `${Format.numWithComma(area)} km²`;\r\n  };\r\n\r\n  static altitude(altitude) {\r\n    return `${Format.numWithComma(altitude)} m\r\n      (${Format.numWithComma(Math.round(altitude * FT_PER_M))} ft)`;\r\n  };\r\n  static population = Format.numWithComma;\r\n\r\n  static phoneNum(phoneNumber) {\r\n    const phoneNumberClean = phoneNumber.replaceAll('-', '')\r\n    const phoneNumberStr = phoneNumberClean.substring(0, 3)\r\n      + ' ' + phoneNumberClean.substring(3, 6)\r\n      + ' ' + phoneNumberClean.substring(6, 10)\r\n    return (\r\n      <a href={`tel:${phoneNumberClean}`} className=\"monospace\">\r\n        {'☎ ' + phoneNumberStr}\r\n      </a>\r\n    );\r\n  }\r\n\r\n  static titleCase(s) {\r\n    s = s.replaceAll('_', ' ');\r\n    return s.split(' ').map(\r\n        (word) => word.charAt(0).toUpperCase() + word.slice(1),\r\n    ).join(' ');\r\n  }\r\n\r\n  static percentAndTotal(value, total) {\r\n    if (total === 0) {\r\n      return '-';\r\n    }\r\n    const p = value / total;\r\n    let fontSize = Math.max(12, parseInt(Math.sqrt(p) * 24));\r\n    const stylePercent = {fontSize}\r\n    const styleValue = {\r\n      fontSize: parseInt(fontSize * 0.8),\r\n      color: 'gray',\r\n    }\r\n\r\n    return (\r\n      <span>\r\n        <div className={'div-percent'} style={stylePercent}>\r\n          {Format.percent(p)}\r\n        </div>\r\n        <div className=\"div-total\" style={styleValue}>\r\n          {Format.numWithComma(value)}\r\n        </div>\r\n      </span>\r\n    )\r\n  }\r\n\r\n  static popDensity(pop, area) {\r\n    return d3.format(\",.0f\")(pop / area) + '/km²';\r\n  }\r\n\r\n}\r\n","import Format from 'nonstate/atoms/Format.js';\r\n\r\nexport function getCensusLabel(tableName) {\r\n  return Format.titleCase(\r\n      tableName\r\n        .replace('population-', '')\r\n        .replace('.regions', '')\r\n        .replace('.2012', '')\r\n        .replace('social-household-', '')\r\n        .replace('-', ' ')\r\n  );\r\n}","export default class MathX {\r\n  static sum(numArr) {\r\n    return numArr.reduce(function(a,b){\r\n      return a + b\r\n    }, 0);\r\n  }\r\n\r\n  static randomInt(min, max) {\r\n    return Math.random() * (max - min) + min;\r\n  }\r\n}\r\n","\r\n\r\nimport MathX from 'base/MathX.js';\r\nimport Format from './Format.js';\r\n\r\nexport default function CensusDescription(props) {\r\n  const {dataMap} = props;\r\n\r\n  const data = Object.entries(Object.values(dataMap)[0])\r\n    .filter((x) => (x[0] !== 'entity_id') && (!x[0].includes('total_')))\r\n    .sort((a, b) => b[1] - a[1]);\r\n  const total = MathX.sum(data.map(x => x[1]));\r\n\r\n  return data.map(\r\n    function([k, v], i) {\r\n      const renderedPct = Format.percent(v / total);\r\n      const renderedLabel =  `\"${Format.titleCase(k)}\"`\r\n      if (v > total * 0.99) {\r\n        return `Almost completely ${renderedLabel} (${renderedPct}). `;\r\n      } else if (v > total * 0.8) {\r\n        return `Overwhelmingly ${renderedLabel} (${renderedPct}). `;\r\n      } else if (v > total * 0.6) {\r\n          return `Mostly ${renderedLabel} (${renderedPct}). `;\r\n\r\n      } else if (i === 0) {\r\n        return `${renderedLabel} (${renderedPct}). `;\r\n      } else if (v > total * 0.1) {\r\n        return `${renderedLabel} (${renderedPct}). `;\r\n      }\r\n      return undefined;\r\n    }\r\n  ).join('');\r\n}\r\n","import './Loader.css';\r\nexport default function Loader(props) {\r\n  return (<div className=\"div-loader\"></div>);\r\n}\r\n","import 'nonstate/atoms/Reference.css';\r\nexport default function Reference(props) {\r\n  const {title, label, link} = props;\r\n  return (\r\n    <div className=\"div-reference\">\r\n      ({`${title}: `}\r\n      <a href={link}>\r\n        {label}\r\n      </a>)\r\n    </div>\r\n  )\r\n}\r\n","export const COLOR_SL_FLAG = {\r\n  SINHALA: 'hsl(355, 63%, 34%)',\r\n  TAMIL: 'hsl(21, 100%, 50%)',\r\n  MOOR: 'hsl(165, 100%, 17%)',\r\n  BUDDHIST: 'hsl(43, 100%, 50%)',\r\n}\r\nexport const FIELD_NAME_TO_COLOR = {\r\n  'other': 'ghostwhite',\r\n  'others': 'gray',\r\n  // ethnicity_of_population\r\n  'bharatha': 'cyan',\r\n  'burgher': 'purple',\r\n  'chetty': 'blue',\r\n  'indian_tamil': COLOR_SL_FLAG.TAMIL,\r\n  'malay': COLOR_SL_FLAG.MOOR,\r\n  'moor': COLOR_SL_FLAG.MOOR,\r\n  'sinhalese': COLOR_SL_FLAG.SINHALA,\r\n  'sri_lankan_tamil': COLOR_SL_FLAG.TAMIL,\r\n  // religious_affiliation_of_population\r\n  'buddhist': COLOR_SL_FLAG.BUDDHIST,\r\n  'islam': COLOR_SL_FLAG.MOOR,\r\n  'hindu': COLOR_SL_FLAG.TAMIL,\r\n  'roman_catholic': 'purple',\r\n  'other_christian': 'blue',\r\n  // gender_of_population\r\n  'female': 'pink',\r\n  'male': 'lightblue',\r\n  // age_group_of_population\r\n  // relationship_to_household_head_of_population\r\n  'son_or_daughter': 'green',\r\n  'head': 'blue',\r\n  'wife_or_husband': 'pink',\r\n  'grandchild_or_great_grand_child': 'darkgreen',\r\n  'other_relative': 'yellow',\r\n  'non_relative': 'silver',\r\n  'son_or_daughter_in_law': 'lightgreen',\r\n  'parent_of_head_or_spouse': 'red',\r\n  'boarder': 'gray',\r\n  'domestic_employee': 'brown',\r\n  'clergy': 'yellow', //\r\n  // communication_items_owned_by_household\r\n  'tv': 'green',\r\n  'mobile': 'purple',\r\n  'radio': 'maroon',\r\n  'fixed_tp': 'blue',\r\n  'pc': 'red',\r\n  'laptop': 'pink',\r\n  'fax': 'silver',\r\n  // cooking_fuel_of_household\r\n  'fire_wood': 'brown',\r\n  'gas': 'orange',\r\n  'kerosene': 'purple',\r\n  'electricity': 'blue',\r\n  // roof_type_in_housing_unit\r\n\r\n  // rooms_in_housing_unit\r\n  // floor_type_in_housing_unit\r\n  'asbestos': 'gray',\r\n  'tile': 'darkred',\r\n  'metal_sheet': 'silver',\r\n  'concrete': 'green',\r\n  'zink_aluminium_sheet': 'blue',\r\n  'cement': 'lightgray',\r\n  'tile_or_granite_or_terrazo': 'orange',\r\n  'mud': 'darkbrown',\r\n  'wood': 'brown',\r\n  // solid_waste_disposal_by_household\r\n  'occupants_burn': 'red',\r\n  'occupants_bury': 'orange',\r\n  'collected_by_local_authorities': 'blue',\r\n  'occupants_composting_solid_waste': 'green',\r\n  // source_of_drinking_water_of_household\r\n  'tap_within_unit_main_line': 'darkgreen',\r\n  'tap_within_premises_but_outside_unit_main_line': 'green',\r\n  'tap_outside_premises_main_line': 'orange',\r\n  'protected_well_within_premises': 'blue',\r\n  'protected_well_outside_premises': 'lightblue',\r\n  'unprotected_well': 'purple',\r\n  'tube_well': 'cyan',\r\n  'rural_water_projects': 'pink',\r\n  'river_or_tank_or_stream': 'red', //\r\n  'bottled_water': 'silver',\r\n  // structure_of_housing_units\r\n  'single_house_single_floor': 'darkgreen',\r\n  'single_house_double_floor': 'green',\r\n  'single_house_more_than_2_floors': 'lightgreen',\r\n  'row_house_or_line_room': 'orange',\r\n  'attached_house_or_annex': 'silver',\r\n  'twin_house': 'cyan',\r\n  'flat': 'blue',\r\n  'condominium': 'purple',\r\n  'hut_or_shanty': 'red',\r\n\r\n  // housing_ownership_status_of_household\r\n  'owned_by_a_household_member': 'green',\r\n  'rent_or_lease_privately_owned': 'blue',\r\n  'rent_or_lease_government_owned': 'cyan',\r\n  'occupied_free_of_rent': 'orange',\r\n  'encroached': 'red',\r\n  // toilet_facilities_of_household\r\n  'water_seal_and_connected_to_a_piped_sewer_system': 'green',\r\n  'water_seal_and_connected_to_a_septic_tank': 'lightgreen',\r\n  'pour_flush_toilet_not_water_seal': 'orange',\r\n  'direct_pit': 'red',\r\n  'not_using_a_toilet': 'black',\r\n  // lighting_of_household\r\n  'electricity_national_electricity_network': 'blue',\r\n  'solar_power': 'yellow',\r\n  'bio_gas': 'orange',\r\n  // living_quarters\r\n  'housing_unit': 'green',\r\n  'collective_living_quarter': 'orange',\r\n  'non_housing_unit': 'red',\r\n  // type_of_housing_unit\r\n  'semi_permanent': 'orange',\r\n  'permanent': 'green',\r\n  'improvised': 'red',\r\n  'unclassified': 'black',\r\n  // marital_status_of_population\r\n  'married_registered': 'blue',\r\n  'never_married': 'green',\r\n  'widowed': 'orange',\r\n  'married_customary': 'lightblue',\r\n  'separated_not_legally': 'pink',\r\n  'divorced': 'red',\r\n  'legally_separated': 'maroon',\r\n  // wall_type_in_housing_units\r\n  'cement_block_or_stone': 'darkgray',\r\n  'brick': 'maroon',\r\n  'cabook': 'orange',\r\n  'soil_bricks': 'green',\r\n  'plank_or_metal_sheet': 'silver',\r\n  // occupation_status_of_housing_units\r\n  'cadjan_or_palmyrah': 'orange',\r\n  'occupied': 'green',\r\n  'vacant': 'red',\r\n  // year_of_construction_of_housing_unit\r\n  // persons_living_in_housing_unit\r\n\r\n};\r\n","import {FIELD_NAME_TO_COLOR} from 'constants/ColorConstants.js';\r\nimport MathX from 'base/MathX.js';\r\n\r\nexport function hsla(h, s, l, a) {\r\n  return `hsl(${h},${s}%,${l}%, ${a})`;\r\n}\r\n\r\nexport function getRandomColor() {\r\n  const h = MathX.randomInt(0, 360);\r\n  const s = MathX.randomInt(20, 80);\r\n  const l = MathX.randomInt(20, 80);\r\n  return hsla(h, s, l, 1);\r\n}\r\n\r\nexport function getFieldNameColor(fieldName) {\r\n  const color = FIELD_NAME_TO_COLOR[fieldName];\r\n  if (color) {\r\n    return color;\r\n  }\r\n  FIELD_NAME_TO_COLOR[fieldName] = getRandomColor();\r\n  return FIELD_NAME_TO_COLOR[fieldName];\r\n}\r\n","import {Component} from 'react';\r\nimport Format from 'nonstate/atoms/Format.js';\r\n\r\nimport './Table.css';\r\n\r\nexport default class PieChart extends Component {\r\n  render() {\r\n    const {tableInfos, total, valueIsPercent} = this.props;\r\n\r\n    return (\r\n      <table>\r\n        <tbody>\r\n          {tableInfos.map(\r\n            function({key, value, color}, iRow) {\r\n\r\n              return (\r\n                <tr key={`tr-${iRow}-${key}`}>\r\n                  <td>\r\n                    <svg width=\"10\" heigh=\"10\">\r\n                      <circle cx=\"5\" cy=\"9\" r=\"4\" style={{'fill': color}} />\r\n                    </svg>\r\n                  </td>\r\n                  <th>{Format.titleCase(key)}</th>\r\n                  <td className=\"align-right highlight\">\r\n                    <div>\r\n                      {valueIsPercent\r\n                          ? Format.percent(value)\r\n                          : Format.percent(value / total)\r\n                      }\r\n                      {}\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"align-right\">\r\n                    <div>\r\n                      {valueIsPercent\r\n                          ? null\r\n                          : Format.numWithComma(value)\r\n                      }\r\n                      {}\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              )\r\n            }\r\n          )}\r\n        </tbody>\r\n      </table>\r\n    )\r\n  }\r\n}\r\n","import {Component} from 'react';\r\nimport {getExtendedData} from 'core/DataTable.js';\r\nimport {getFieldNameColor} from 'core/Color.js';\r\nimport Table from './Table.js';\r\n\r\nimport './PieChart.css';\r\n\r\nexport default class PieChart extends Component {\r\n  render() {\r\n    const {dataMap, tableName, valueIsPercent} = this.props;\r\n    const {extendedData, total} = getExtendedData(dataMap, valueIsPercent);\r\n    const [width, height]= [120, 120];\r\n    const [cx, cy] = [width / 2, height / 2];\r\n    const r = Math.min(cx, cy);\r\n\r\n    let runningTotal = 0;\r\n    let tableInfos = [];\r\n    const renderedArcs = extendedData.map(\r\n      function([fieldName, value], iData) {\r\n        const p1 = runningTotal / total;\r\n        runningTotal += value;\r\n        const p2 = runningTotal / total;\r\n\r\n        const theta1 = p1 * 2 * Math.PI;\r\n        const x1 = cx + r * Math.sin(theta1);\r\n        const y1 = cy - r * Math.cos(theta1);\r\n\r\n        const theta2 = p2 * 2 * Math.PI;\r\n        const x2 = cx + r * Math.sin(theta2);\r\n        const y2 = cy - r * Math.cos(theta2);\r\n\r\n        const xAxisRot = 0\r\n        const largeArcFlag = Math.abs(theta2 - theta1) > Math.PI ? 1 : 0;\r\n        const sweepFlag = theta2 > 0 ? 1 : 0;\r\n\r\n        const d = [\r\n          `M${cx},${cy}`,\r\n          `L${x1},${y1}`,\r\n          `A${r},${r},${xAxisRot},${largeArcFlag},${sweepFlag},${x2},${y2}`,\r\n          'Z',\r\n        ].join(' ');\r\n\r\n        const fill = getFieldNameColor(fieldName);\r\n        tableInfos.push({\r\n          key: fieldName,\r\n          value: value,\r\n          color: fill,\r\n        })\r\n\r\n        return (\r\n          <path key={'pie-chart-' + iData} d={d} fill={fill}/>\r\n        )\r\n      }\r\n    )\r\n\r\n    return (\r\n      <div key={'div-' + tableName} className=\"div-pie-chart-outer\">\r\n        <div className=\"div-table\">\r\n          {<Table\r\n            tableInfos={tableInfos}\r\n            total={total}\r\n            valueIsPercent={valueIsPercent}\r\n          />}\r\n        </div>\r\n        {valueIsPercent ? null : (\r\n          <div className=\"div-pie-chart\" >\r\n            <svg className=\"svg-pie-chart\" width={width} height={height}>\r\n              {renderedArcs}\r\n            </svg>\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import MathX from 'base/MathX.js';\r\nconst DEFAULT_OTHERS_LIMIT = 0.001;\r\n\r\nexport function getExtendedData(dataMap, valueIsPercent=false) {\r\n  const extendedDataRaw = Object.entries(Object.values(dataMap)[0]).map(\r\n      function ([fieldName, value]) {\r\n        return [fieldName, value];\r\n      }\r\n  ).filter(\r\n    function ([fieldName, _]) {\r\n      return !fieldName.includes('total_')\r\n        && !fieldName.includes('entity_id') ;\r\n    }\r\n  ).sort(\r\n    function([fieldNameA, valueA], [fieldNameB, valueB]) {\r\n      return valueB - valueA;\r\n    }\r\n  );\r\n\r\n  const total = (valueIsPercent) ? 1: MathX.sum(\r\n    extendedDataRaw.map(([fieldName, value]) => value)\r\n  );\r\n\r\n  const extendedDataSig = extendedDataRaw.filter(\r\n    function ([label, value]) {\r\n      return (value > total * DEFAULT_OTHERS_LIMIT) && (label !== 'other');\r\n    }\r\n  )\r\n\r\n  const totalSig = MathX.sum(extendedDataSig.map(\r\n      ([fieldName, value]) => value),\r\n  );\r\n  const others = valueIsPercent ? 0 : (total - totalSig);\r\n\r\n  let extendedData = extendedDataSig;\r\n  if (others) {\r\n    extendedData.push(['others', others]);\r\n  }\r\n  return {\r\n    extendedData,\r\n    total,\r\n  }\r\n}\r\n","import {Component} from 'react';\r\n\r\nimport MathX from 'base/MathX.js';\r\nimport {hsla} from 'core/Color.js';\r\nimport Table from './Table.js';\r\n\r\nimport './Pyramid.css';\r\n\r\nexport default class Pyramid extends Component {\r\n  render() {\r\n    const {dataMap, tableName, ageKeys} = this.props;\r\n    const innerDataMap = Object.values(dataMap)[0];\r\n\r\n    const dataValues = ageKeys.map(k => innerDataMap[k[0]]);\r\n    const totalKeySpan = MathX.sum(ageKeys.map(k => k[1]));\r\n    const total = MathX.sum(dataValues);\r\n    const max = Math.max(...ageKeys.map(k => innerDataMap[k[0]] / k[1]));\r\n\r\n    const nData = ageKeys.length;\r\n    const [width, height]= [120, 19 * nData];\r\n    const styleDiv = {width: width * 2, height}\r\n\r\n    let tableInfos = [];\r\n    let rollingKeySpan = 0;\r\n    const renderedBars = ageKeys.map(\r\n      function([ageKey, keySpan], iData) {\r\n        const value = innerDataMap[ageKey];\r\n        const fieldName = ageKey;\r\n\r\n        const widthBar = width * (value / max) / keySpan;\r\n        const heightBar = height * (keySpan / totalKeySpan);\r\n        const x = width / 2 - widthBar / 2;\r\n        const y = height * rollingKeySpan / totalKeySpan;\r\n        rollingKeySpan += keySpan;\r\n\r\n        const fill = hsla(120 * (1 - iData / nData), 80, 50, 1);\r\n        tableInfos.push({\r\n          key: fieldName,\r\n          value: value,\r\n          color: fill,\r\n        })\r\n        \r\n        return (\r\n          <rect\r\n            key={'pyramid-' + iData}\r\n            x={x}\r\n            y={y}\r\n            width={widthBar}\r\n            height={heightBar}\r\n            fill={fill}\r\n          />\r\n        )\r\n      }\r\n    )\r\n\r\n    return (\r\n      <div key={'div-' + tableName} className=\"div-pyramid-outer\">\r\n        <div className=\"div-table\">\r\n          {<Table tableInfos={tableInfos} total={total} />}\r\n        </div>\r\n        <div className=\"div-pyramid\" style={styleDiv}>\r\n          <svg className=\"svg-pyramid\" width={width} height={height}>\r\n            {renderedBars}\r\n          </svg>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import {Component} from 'react';\r\n\r\nimport GIGServer from 'core/GIGServer.js';\r\nimport {CENSUS_TABLE_SPAN_INFO} from 'constants/CensusConstants.js';\r\nimport {getCensusLabel} from 'core/Census.js';\r\nimport CensusDescription from 'nonstate/atoms/CensusDescription.js';\r\nimport Loader from 'nonstate/atoms/Loader.js';\r\nimport Reference from 'nonstate/atoms/Reference.js';\r\nimport PieChart from 'nonstate/molecules/PieChart.js';\r\nimport Pyramid from 'nonstate/molecules/Pyramid.js';\r\n\r\nimport './CensusInfo.css';\r\n\r\n\r\nexport default class CensusInfo extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {dataMap: undefined};\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const {tableName, entityID} = this.props;\r\n    try {\r\n      const dataMap = await GIGServer.getCensus(tableName, entityID);\r\n      this.setState({dataMap});\r\n    } catch (err) {}\r\n  }\r\n\r\n  render() {\r\n    if (!this.state?.dataMap) {\r\n      return <Loader />;\r\n    }\r\n    return this.renderWithData();\r\n  }\r\n\r\n  renderWithData() {\r\n    const {tableName, iTable} = this.props;\r\n    const {dataMap} = this.state;\r\n\r\n    let ChartComponent;\r\n    if (CENSUS_TABLE_SPAN_INFO[tableName]) {\r\n        ChartComponent = Pyramid;\r\n    } else {\r\n        ChartComponent = PieChart;\r\n    }\r\n\r\n    const valueIsPercent =\r\n      (tableName === 'communication_items_owned_by_household');\r\n\r\n    return (\r\n      <div\r\n        key={`div-census-info-${iTable}-${tableName}`}\r\n        className=\"div-census-info\"\r\n      >\r\n        <h4 className=\"h4-census-label\">{getCensusLabel(tableName)}</h4>\r\n        <Reference\r\n          title=\"Data Source\"\r\n          label=\"Department of Census and Statistics, Sri Lanka\"\r\n          link=\"http://www.statistics.gov.lk/\"\r\n        />\r\n        {valueIsPercent ? null : <CensusDescription dataMap={dataMap} />}\r\n        <div className=\"div-census-chart-component\">\r\n          <ChartComponent\r\n            dataMap={dataMap}\r\n            tableName={tableName}\r\n            ageKeys={CENSUS_TABLE_SPAN_INFO[tableName]}\r\n            valueIsPercent={valueIsPercent}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import CensusInfo from './CensusInfo.js';\r\nimport './CensusInfoGroup.css';\r\n\r\nexport default function CensusInfoGroup(props) {\r\n  const {groupName, tableNames, entityID} = props;\r\n  const renderedInner = tableNames.map(\r\n    function (tableName, iTable) {\r\n      const key = `census-info-${iTable}-${tableName}-`;\r\n      return (\r\n        <CensusInfo\r\n          key={key}\r\n          tableName={tableName}\r\n          entityID={entityID}\r\n          iTable={iTable}\r\n        />\r\n      );\r\n    }\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <h3 className=\"h3-census-group-name\">{groupName}</h3>\r\n      {renderedInner}\r\n    </div>\r\n  )\r\n}\r\n","import {CENSUS_TABLE_GROUPS} from 'constants/CensusConstants.js';\r\nimport CensusInfoGroup from './CensusInfoGroup.js';\r\n\r\nexport default function CensusInfoGroupList(props) {\r\n  const {entityID} = props;\r\n  return Object.entries(CENSUS_TABLE_GROUPS).map(\r\n    function ([groupName, tableNames], iCensusInfoGroup) {\r\n      const key = `census-info-group-${iCensusInfoGroup}-${groupName}-`;\r\n      return (\r\n        <CensusInfoGroup\r\n          key={key}\r\n          groupName={groupName}\r\n          tableNames={tableNames}\r\n          entityID={entityID}\r\n        />\r\n      );\r\n    }\r\n  );\r\n}\r\n","import React, {Component} from 'react';\r\n\r\nimport XButton from 'nonstate/atoms/XButton.js';\r\nimport CensusInfoGroupList from 'stateful/molecules/CensusInfoGroupList.js';\r\n\r\nimport './DetailedInfoPane.css';\r\n\r\nexport default class DetailedInfoPane extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      showDetails: false,\r\n    };\r\n    this.onClickShow = this.onClickShow.bind(this);\r\n    this.onClickHide = this.onClickHide.bind(this);\r\n  }\r\n\r\n  onClickShow(e) {\r\n    this.setState({showDetails: true});\r\n  }\r\n\r\n  onClickHide(e) {\r\n    this.setState({showDetails: false});\r\n  }\r\n\r\n  render() {\r\n    const {showDetails} = this.state;\r\n    const {entityID} = this.props;\r\n\r\n    if (!showDetails) {\r\n      return (\r\n        <div className=\"div-detailed-info\">\r\n          <div\r\n            className=\"div-show-details\"\r\n            onClick={this.onClickShow.bind(this)}\r\n          >\r\n            Click to see Details about {entityID}\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    const className = showDetails ? 'show' : 'hide';\r\n\r\n    return (\r\n      <div className={`div-detailed-info ${className}`}>\r\n        <XButton onClick={this.onClickHide}/>\r\n        <div className=\"div-summary-outer\">\r\n          <CensusInfoGroupList entityID={entityID} />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport Reference from 'nonstate/atoms/Reference.js';\r\n\r\nimport './InfoTable.css';\r\n\r\nexport default class InfoTable extends Component {\r\n\r\n  renderRow([label, content], iRow) {\r\n    const key = `row-${iRow}-${label}`;\r\n\r\n    return (\r\n      <tr key={key}>\r\n        <th>{label}</th>\r\n        <td>{content}</td>\r\n      </tr>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const {dataMap, title} = this.props;\r\n\r\n    return (\r\n      <div className=\"div-info-table\">\r\n        <h3 className=\"h3-info-table-title\">{title}</h3>\r\n        <table className=\"table-info-table\">\r\n          <tbody>\r\n            {Object.entries(dataMap).map(this.renderRow)}\r\n          </tbody>\r\n        </table>\r\n        <Reference\r\n          title=\"Data Source\"\r\n          label=\"Department of Census and Statistics, Sri Lanka\"\r\n          link=\"http://www.statistics.gov.lk/\"\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\n\r\nimport {ENTITY} from 'constants/EntityConstants.js';\r\nimport Entity from 'core/Entity.js';\r\nimport GIGServer from 'core/GIGServer.js';\r\n\r\nimport './EntityLink.css';\r\n\r\nexport default class EntityLink extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {entity: undefined};\r\n  }\r\n  async componentDidMount() {\r\n    try {\r\n      const entity = await GIGServer.getEntity(this.props.entityID);\r\n      this.setState({entity});\r\n    } catch (err) {}\r\n  }\r\n\r\n  render() {\r\n    const {entityID, iEntityID} = this.props;\r\n    const entityType = Entity.getEntityType(entityID)\r\n\r\n    if (entityID === 'LK') {\r\n      return 'Sri Lanka';\r\n    }\r\n    const {entity} = this.state;\r\n\r\n    let label = entityID;\r\n    let className = 'entity-link ';\r\n    if (entity) {\r\n        label = `${entity.name} ${Entity.getEntityLabelShort(entityType)}`;\r\n        className += 'link-name';\r\n    } else {\r\n      className += 'link-id';\r\n    }\r\n\r\n    let pageName = 'admin';\r\n    if (entityType === ENTITY.PS) {\r\n      pageName = 'place';\r\n    }\r\n\r\n    const key = `a-${iEntityID}-${entityID}`;\r\n\r\n    return (\r\n      <a\r\n        key={key}\r\n        className={className}\r\n        href={`/mylocal/${pageName}/${entityID}`}\r\n      >\r\n        {label}\r\n      </a>\r\n    )\r\n  }\r\n}\r\n","import EntityLink from 'stateful/atoms/EntityLink.js';\r\n\r\nexport default function EntityLinkList(props) {\r\n  const {entityIDList, iEntityIDList} = props;\r\n\r\n  return (\r\n    <div\r\n      key={`div-entity-link-list-${iEntityIDList}`}\r\n      className=\"div-entity-link-list\"\r\n    >\r\n      {entityIDList.sort().map(\r\n        function(entityID, iEntityID) {\r\n          const key = `div-entity-link-${iEntityID}-${entityID}`;\r\n          return (\r\n            <div key={key}>\r\n              <EntityLink\r\n                entityID={entityID}\r\n                iEntityID={iEntityID}\r\n              />\r\n            </div>\r\n          );\r\n        }\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import EntityLinkList from './EntityLinkList.js';\r\n\r\nexport default function EntityLinkListList(props) {\r\n  const {entityIDListList, ientityIDListList} = props;\r\n\r\n  return (\r\n    <div\r\n      key={`div-entity-linkt-list-list-${ientityIDListList}`}\r\n      className=\"div-entity-link-list-list\"\r\n    >\r\n      {entityIDListList.sort().map(\r\n        function(entityIDList, iEntityIDList) {\r\n          const key = `entity-link-list-${iEntityIDList}`;\r\n          return (\r\n            <EntityLinkList\r\n              key={key}\r\n              entityIDList={entityIDList}\r\n              iEntityIDList={iEntityIDList}\r\n            />\r\n          );\r\n        }\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","export function getProvinceInfo(entityData) {\r\n  return Object.assign({}, {\r\n    'ISO 3166 code': entityData.id,\r\n    'FIPS code': entityData.fips,\r\n  });\r\n}\r\n\r\nexport function getDistrictInfo(entityData) {\r\n  return Object.assign({}, {\r\n    'ISO 3166 code': entityData.id,\r\n    'FIPS code': entityData.fips,\r\n    'HASC code': entityData.hasc,\r\n  });\r\n}\r\n\r\nexport function getDSDInfo(entityData) {\r\n  return Object.assign({}, {\r\n    'ISO 3166 code': entityData.id,\r\n    'HASC code': entityData.hasc,\r\n  });\r\n}\r\n\r\nexport function getGNDInfo(entityData) {\r\n  return Object.assign({}, {\r\n    'ISO 3166 code': entityData.id,\r\n    'GND Num': entityData.gnd_num,\r\n  });\r\n}\r\n","import {indexArrayByKey} from 'base/DataStructures.js';\r\nimport {ENTITY} from 'constants/EntityConstants.js';\r\nimport Entity from 'core/Entity.js';\r\nimport Format from 'nonstate/atoms/Format.js';\r\n\r\nimport EntityLink from 'stateful/atoms/EntityLink.js';\r\nimport EntityLinkListList from 'stateful/molecules/EntityLinkListList.js';\r\n\r\nimport {\r\n  getProvinceInfo,\r\n  getDistrictInfo,\r\n  getDSDInfo,\r\n  getGNDInfo,\r\n} from 'stateful/molecules/EntityInfoCustom.js';\r\n\r\nexport function getParentEntityInfo(entityData) {\r\n  return Entity.getIDEntries(entityData).reduce(\r\n    function(idInfo, [_, id]) {\r\n      idInfo[Entity.getEntityLabel(Entity.getEntityType(id))] = (\r\n        <EntityLink entityID={id} />\r\n      );\r\n      return idInfo;\r\n    }, {},\r\n  )\r\n}\r\n\r\nexport function getRelatedEntityInfo(entityData) {\r\n  return [\r\n    ['eqs', 'Equivalent to'],\r\n    ['subs', 'Contains'],\r\n    ['supers', 'Contained in'],\r\n    ['ints', 'Overlaps with'],\r\n  ].reduce (\r\n    function(info, [k, label]) {\r\n        const idListList = Object.values(\r\n          indexArrayByKey(JSON.parse(entityData[k].replace(/'/g, '\"')), Entity.getEntityType),\r\n        );\r\n        if (idListList.length === 0) {\r\n          return info;\r\n        }\r\n\r\n        return Object.assign(info, {\r\n          [label]: (<EntityLinkListList entityIDListList={idListList} />),\r\n        });\r\n\r\n    },\r\n    {},\r\n  );\r\n}\r\n\r\nexport function getBaseInfo(entityData) {\r\n  const entityType = Entity.getEntityType(entityData.id);\r\n  return Object.assign({},\r\n    {\r\n      Name: `${entityData.name} ${Entity.getEntityLabel(entityType)}`,\r\n      Area: Format.area(entityData.area),\r\n      Population: Format.population(entityData.population),\r\n      'Pop. Density': Format.popDensity(entityData.population, entityData.area),\r\n      'Altitude (Centroid)': Format.altitude(entityData.centroid_altitude),\r\n    },\r\n  );\r\n}\r\n\r\nexport function getCustomInfo(entityData) {\r\n  const entityType = Entity.getEntityType(entityData.id);\r\n  const getter = {\r\n    [ENTITY.PROVINCE]: getProvinceInfo,\r\n    [ENTITY.DISTRICT]: getDistrictInfo,\r\n    [ENTITY.DSD]: getDSDInfo,\r\n    [ENTITY.GND]: getGNDInfo,\r\n  };\r\n  return Object.assign({},\r\n    getter[entityType] ? (getter[entityType](entityData)) : {},\r\n  );\r\n}\r\n","import React, {Component} from 'react';\r\nimport GIGServer from 'core/GIGServer.js';\r\n\r\nimport Loader from 'nonstate/atoms/Loader.js';\r\nimport InfoTable from 'nonstate/molecules/InfoTable.js';\r\nimport {\r\n  getBaseInfo,\r\n  getParentEntityInfo,\r\n  getCustomInfo,\r\n  getRelatedEntityInfo,\r\n} from 'stateful/molecules/EntityInfo.js';\r\n\r\nimport './EntityInfoPane.css';\r\n\r\nexport default class EntityInfoPane extends Component {\r\n  async componentDidMount() {\r\n    const {entityID} = this.props;\r\n    try {\r\n      const entityData = await GIGServer.getEntity(entityID);\r\n      this.setState({\r\n        baseInfo: getBaseInfo(entityData),\r\n        parentEntityInfo: getParentEntityInfo(entityData),\r\n        customInfo: getCustomInfo(entityData),\r\n        relatedEntityInfo: getRelatedEntityInfo(entityData),\r\n      });\r\n    } catch(err) {\r\n    }\r\n\r\n  }\r\n\r\n  render() {\r\n    if (!this.state) {\r\n      return <Loader />;\r\n    }\r\n\r\n    const {\r\n      baseInfo,\r\n      parentEntityInfo,\r\n      customInfo,\r\n      relatedEntityInfo,\r\n    } = this.state;\r\n\r\n\r\n    return (\r\n      <div className=\"div-entity-info-pane\">\r\n        <InfoTable title=\"Basic Info\" dataMap={baseInfo} />\r\n        <InfoTable title=\"Parent Regions\" dataMap={parentEntityInfo} />\r\n        <InfoTable title=\"Alternative Region Codes\" dataMap={customInfo} />\r\n        <InfoTable title=\"Related Regions\" dataMap={relatedEntityInfo} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\n\r\nimport './Infobox.css';\r\n\r\nexport default class Infobox extends Component {\r\n  render() {\r\n    const {title, subTitle} = this.props;\r\n\r\n    return (\r\n      <div className=\"div-infobox\">\r\n        <div className=\"div-sub-title\">{subTitle}</div>\r\n        <div className=\"div-title\">{title}</div>\r\n        {this.props.children}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport {arrayFlatten} from 'base/DataStructures.js';\r\nimport GeoServer from 'core/GeoServer.js';\r\nimport {Polyline} from 'react-leaflet';\r\n\r\nimport './RegionMap.css';\r\n\r\nexport default class RegionMap extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      geoDataForRegion: undefined,\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const {regionID} = this.props;\r\n    try {\r\n      this.setState({\r\n        geo: await GeoServer.getGeo(regionID),\r\n      })\r\n    } catch (err) {}\r\n  }\r\n\r\n  render() {\r\n    const {geo} = this.state;\r\n    if (!geo) {\r\n      return null;\r\n    }\r\n\r\n    let multiPolygon;\r\n    if (geo.type === 'Polygon') {\r\n      multiPolygon = geo.coordinates;\r\n    } else {\r\n      multiPolygon = arrayFlatten(geo.coordinates);\r\n    }\r\n\r\n    multiPolygon = multiPolygon.map(\r\n      (polygon) => polygon.map(\r\n        ([lng, lat]) => [lat, lng],\r\n      )\r\n    );\r\n\r\n    return (\r\n      <Polyline\r\n        className=\"polyline-region-map\"\r\n        positions={multiPolygon}\r\n      />\r\n    )\r\n  }\r\n}\r\n","import {useState} from 'react';\r\nimport {useMapEvents} from 'react-leaflet';\r\n\r\nexport default function MapLocationMarker({onChangeLocation}) {\r\n  const map = useMapEvents({\r\n    click(e) {\r\n      const {lat, lng} = e.latlng;\r\n      map.flyTo({lat, lng}, map.getZoom())\r\n      setPosition({lat, lng})\r\n      onChangeLocation([lat, lng])\r\n    },\r\n  })\r\n  // eslint-disable-next-line\r\n  const [position, setPosition] = useState(map.getCenter());\r\n  return null;\r\n}\r\n","import React, {Component} from 'react';\r\nimport {MapContainer, TileLayer} from 'react-leaflet';\r\n\r\nimport Entity from 'core/Entity.js';\r\nimport {\r\n  ENTITY_LABEL_MAP,\r\n  DEFAULT_ENTITY_ID\r\n} from 'constants/EntityConstants.js';\r\nimport {LAT_LNG} from 'constants/LatLngConstants.js';\r\n\r\nimport {getRegionBBox} from 'core/RegionGeo.js';\r\nimport {getZoom} from 'base/OSM.js';\r\nimport {ENTITY} from 'constants/EntityConstants.js';\r\nimport GeoServer from 'core/GeoServer.js';\r\n\r\nimport DetailedInfoPane from 'stateful/molecules/DetailedInfoPane.js';\r\nimport EntityInfoPane from 'stateful/molecules/EntityInfoPane.js';\r\nimport Infobox from 'nonstate/molecules/Infobox.js';\r\nimport RegionMap from 'stateful/molecules/RegionMap.js';\r\n\r\nimport Loader from 'nonstate/atoms/Loader.js';\r\nimport MapLocationMarker from 'stateful/atoms/MapLocationMarker.js';\r\n\r\nimport './AdminPage.css';\r\n\r\nexport const DEFAULT_ZOOM = 13;\r\n\r\nexport default class AdminPage extends Component {\r\n  static getDefaultLatLngAndZoom() {\r\n    return {latLng: LAT_LNG.COLOMBO, zoom: DEFAULT_ZOOM};\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = Object.assign({},\r\n      AdminPage.getDefaultLatLngAndZoom(),\r\n      {regionID: this.props.match?.params?.regionID || DEFAULT_ENTITY_ID},\r\n    );\r\n    this.onChangeLocation = this.onChangeLocation.bind(this);\r\n  }\r\n\r\n  getRegionID() {\r\n    return this.state.regionID;\r\n  }\r\n\r\n  async onChangeLocation([lat, lng]) {\r\n    const {regionID} = this.state;\r\n    const regionType = Entity.getEntityType(regionID);\r\n    try {\r\n      const region = await GeoServer.getRegionInfo([lat, lng]);\r\n      console.debug('onChangeLocation', region);\r\n      const gndID = region[regionType] ?? region[ENTITY.DISTRICT];\r\n      this.setState({regionID: gndID});\r\n    } catch(err) {}\r\n  }\r\n\r\n  async getLatLngAndZoom() {\r\n    const regionID = this.getRegionID()\r\n    try {\r\n      const [[minLat, minLng], [maxLat, maxLng]] =\r\n        await getRegionBBox(regionID);\r\n      const latLng = [(minLat + maxLat) / 2, (minLng + maxLng) / 2];\r\n      const zoom = getZoom(maxLat - minLat);\r\n      return {latLng, zoom};\r\n    } catch {\r\n      return {latLng: LAT_LNG.COLOMBO, zoom: DEFAULT_ZOOM};\r\n    }\r\n  }\r\n\r\n  renderInner() {\r\n    const regionID = this.getRegionID()\r\n    const regionType = Entity.getEntityType(regionID);\r\n\r\n    return (\r\n      <div key={`div-admin-inner-${regionID}`}>\r\n        <Infobox\r\n          subTitle={ENTITY_LABEL_MAP[regionType]}\r\n          title={regionID}\r\n        >\r\n          <EntityInfoPane entityID={regionID}/>\r\n        </Infobox>\r\n        <DetailedInfoPane entityID={regionID}/>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderInnerMapLayer() {\r\n    const regionID = this.getRegionID()\r\n    return (\r\n      <RegionMap\r\n        key={`RegionMap-${regionID}`}\r\n        regionID={regionID}\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    if (!this?.state?.latLng) {\r\n      return <Loader />;\r\n    }\r\n    const {zoom, latLng} = this.state;\r\n    const [lat, lng] = latLng;\r\n\r\n    return (\r\n      <div key={`page-${lat}-${lng}-${zoom}`}>\r\n        <MapContainer center={[lat, lng]} zoom={zoom}>\r\n          <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\r\n          {this.renderInnerMapLayer()}\r\n          <MapLocationMarker\r\n            onChangeLocation={this.onChangeLocation}\r\n          />\r\n        </MapContainer>\r\n        {this.renderInner()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","\r\nexport function getLatLngSpans([width, height], zoom) {\r\n  const latSpan = 1000 / Math.pow(2, zoom);\r\n  const lngSpan = latSpan * width / height;\r\n  return [latSpan, lngSpan];\r\n}\r\n\r\nexport function getZoom(latSpan) {\r\n  return parseInt(-Math.log2(latSpan / 1000));\r\n}\r\n","import React, {Component} from 'react';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect,\r\n} from \"react-router-dom\";\r\n\r\nimport {DEFAULT_ENTITY_ID} from 'constants/EntityConstants.js';\r\nimport TestMode from 'nonstate/atoms/TestMode.js';\r\nimport AdminPage from 'stateful/pages/AdminPage.js';\r\n\r\n\r\nimport './App.css';\r\n\r\nexport default class App extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <TestMode />\r\n        <Router basename=\"/mylocal\">\r\n          <Switch>\r\n            <Route path=\"/admin/:regionID\" component={AdminPage}/>\r\n            <Route>\r\n               <Redirect to={`/admin/${DEFAULT_ENTITY_ID}`} />\r\n            </Route>\r\n          </Switch>\r\n        </Router>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\nreportWebVitals();\r\n"],"sourceRoot":""}